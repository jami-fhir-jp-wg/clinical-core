{
  "resourceType": "StructureDefinition",
  "id": "JP-DrugContraIndication-eCS",
  "url": "http://jpfhir.jp/fhir/eClinicalSummary/StructureDefinition/JP_DrugContraIndication_eClinicalSummary",
  "version": "0.1.0",
  "name": "JP_DrugContraIndication_eCS",
  "title": "Core6 : JP_DrugContraIndication_eCS",
  "status": "active",
  "date": "2023-05-27",
  "description": "診療情報コアサマリー用　AllergyIntoleranceリソース（薬剤禁忌情報に特化）プロファイル　（JP_AllergyIntoleranceの派生プロファイル）",
  "fhirVersion": "4.0.1",
  "mapping": [
    {
      "identity": "rim",
      "uri": "http://hl7.org/v3",
      "name": "RIM Mapping"
    },
    {
      "identity": "w5",
      "uri": "http://hl7.org/fhir/fivews",
      "name": "FiveWs Pattern Mapping"
    },
    {
      "identity": "v2",
      "uri": "http://hl7.org/v2",
      "name": "HL7 v2 Mapping"
    }
  ],
  "kind": "resource",
  "abstract": false,
  "type": "AllergyIntolerance",
  "baseDefinition": "http://jpfhir.jp/fhir/core/StructureDefinition/JP_AllergyIntolerance",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "AllergyIntolerance",
        "path": "AllergyIntolerance",
        "short": "診療情報コアサマリーにおける薬剤禁忌情報の格納に使用する",
        "definition": "診療情報コアサマリー・厚労省6情報などにおける薬剤禁忌情報の格納に使用する",
        "comment": "厚労省6情報などの運用において、アレルギー情報のプロファイルではなく、薬剤禁忌の情報は本プロフィルを使用すること。両者の区別は、category要素=drug かつ criticality要素=high によって判定する。"
      },
      {
        "id": "AllergyIntolerance.identifier",
        "path": "AllergyIntolerance.identifier",
        "max": "1",
        "mustSupport": true
      },
      {
        "id": "AllergyIntolerance.identifier.system",
        "path": "AllergyIntolerance.identifier.system",
        "min": 1,
        "patternUri": "http://jpfhir.jp/fhir/core/IdSystem/resourceInstance-identifier",
        "mustSupport": true
      },
      {
        "id": "AllergyIntolerance.identifier.value",
        "path": "AllergyIntolerance.identifier.value",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "AllergyIntolerance.clinicalStatus",
        "path": "AllergyIntolerance.clinicalStatus",
        "short": "臨床的状態のステータス。",
        "definition": "active | inactive | resolved のいすれか（現存、非現存、解消）system=http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical",
        "mustSupport": true
      },
      {
        "id": "AllergyIntolerance.verificationStatus",
        "path": "AllergyIntolerance.verificationStatus",
        "short": "入力された臨床的状態に対する検証状況を示す。確からしさと考えられる。",
        "definition": "unconfirmed | confirmed | refuted | entered-in-error  のいずれか（未確認、確認ずみ、否定、エラー）　system=http://terminology.hl7.org/CodeSystem/allergyintolerance-verification",
        "mustSupport": true
      },
      {
        "id": "AllergyIntolerance.type",
        "path": "AllergyIntolerance.type",
        "short": "副反応の生理的なメカニズムの種類（アレルギーによるものか不耐性によるものかどうか）",
        "definition": "記述する場合は、コード表：\"http://hl7.org/fhir/allergy-intolerance-type\" から　allergy | intolerance のいずれか（アレルギー反応、不耐性反応）",
        "mustSupport": true
      },
      {
        "id": "AllergyIntolerance.category",
        "path": "AllergyIntolerance.category",
        "short": "特定された原因物質のカテゴリ。記述を可能な限り推奨する。",
        "definition": "コード表：\"http://hl7.org/fhir/allergy-intolerance-category\" から medication 医薬品 を使用する。",
        "comment": "厚労省6情報などの運用において、薬剤禁忌の情報は本プロフィルではなく、薬剤禁忌情報プロファイルを使用することとしているで、medication を設定する場合には禁忌であれば、別のプロファイルを使用すること。",
        "min": 1,
        "max": "1",
        "patternCode": "medication",
        "mustSupport": true
      },
      {
        "id": "AllergyIntolerance.criticality",
        "path": "AllergyIntolerance.criticality",
        "short": "潜在的な臨床的危険性、致命度",
        "definition": "記述する場合は、コード表：\"http://hl7.org/fhir/allergy-intolerance-criticality\" から high を使用する。",
        "min": 1,
        "patternCode": "high",
        "mustSupport": true
      },
      {
        "id": "AllergyIntolerance.code",
        "path": "AllergyIntolerance.code",
        "short": "医薬品情報のコード",
        "definition": "jp-coreで定めるallergy-substanceコード表のコードを使用を推奨する。コード化できない場合には、code.text のみで記述する。使用するコード表（推奨）：http://jpfhir.jp/fhir/core/CodeSystem/JP_JfagyMedicationAllergen_CS　これに使用される医薬品コードはYJコード、厚生労働省医薬品コード、同一般医薬品コード、HOT9コードなどを選べる。",
        "comment": "https://jami-fhir-jp-wg.github.io/jp-core-v1xpages/jpcore-r4/develop/StructureDefinition-jp-allergyintolerance.html#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85 の注意事項を参照のこと。またアレルギー情報や薬剤禁忌情報はコードにより正確に表現することが困難であることが多いので、必ずcode.textにより文字列で記述すること。",
        "min": 1,
        "mustSupport": true,
        "binding": {
          "strength": "preferred",
          "valueSet": "http://jpfhir.jp/fhir/core/CodeSystem/JP_JfagyMedicationAllergen_VS"
        }
      },
      {
        "id": "AllergyIntolerance.code.text",
        "path": "AllergyIntolerance.code.text",
        "short": "薬剤禁忌情報をフリーテキストで記述した内容",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "AllergyIntolerance.patient",
        "path": "AllergyIntolerance.patient",
        "short": "患者情報",
        "definition": "患者情報への参照",
        "comment": "Containedリソースに含まれる患者リソースのid(identifierではなく)をリソース内で#を最初につけて参照する。（患者リソースのid を　123 とすると、　{\"reference\" : \"#123\" }のようになる。）",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://jpfhir.jp/fhir/eClinicalSummary/StructureDefinition/JP_Patient_eCS_Contained"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "AllergyIntolerance.encounter",
        "path": "AllergyIntolerance.encounter",
        "short": "この情報を記録したときの受診情報（入外区分など）",
        "definition": "この情報を記録したときの受診情報（入外区分など）を表すEncounterリソース（Containedリソース）への参照",
        "comment": "Containedリソースに含まれるEncounterリソースをリソース内で参照する。なくてもよい。",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://jpfhir.jp/fhir/eClinicalSummary/StructureDefinition/JP_Encounter_OW_eCS_Contained"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "AllergyIntolerance.onset[x]",
        "path": "AllergyIntolerance.onset[x]",
        "slicing": {
          "discriminator": [
            {
              "type": "type",
              "path": "$this"
            }
          ],
          "ordered": false,
          "rules": "open"
        },
        "type": [
          {
            "code": "Period"
          }
        ]
      },
      {
        "id": "AllergyIntolerance.onsetPeriod",
        "path": "AllergyIntolerance.onsetPeriod",
        "min": 0,
        "max": "1"
      },
      {
        "id": "AllergyIntolerance.onsetPeriod.start",
        "path": "AllergyIntolerance.onsetPeriod.start",
        "short": "登録日またはこの状態の存在が開始した日"
      },
      {
        "id": "AllergyIntolerance.onsetPeriod.end",
        "path": "AllergyIntolerance.onsetPeriod.end",
        "short": "この状態がなくなった、無効になった日"
      },
      {
        "id": "AllergyIntolerance.recordedDate",
        "path": "AllergyIntolerance.recordedDate",
        "short": "この情報を記録した登録日",
        "definition": "この情報を記録した登録日",
        "mustSupport": true
      },
      {
        "id": "AllergyIntolerance.recorder",
        "path": "AllergyIntolerance.recorder",
        "short": "この情報を記録した登録者",
        "definition": "登録者を表すPractitionerリソース（Containedリソース）への参照",
        "comment": "Containedリソースに含まれるPractitioner（登録者/医療者）リソースをこのリソース内で参照する。",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://jpfhir.jp/fhir/eClinicalSummary/StructureDefinition/JP_Practitioner_eCS_Contained"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "AllergyIntolerance.asserter",
        "path": "AllergyIntolerance.asserter",
        "mustSupport": true
      },
      {
        "id": "AllergyIntolerance.lastOccurrence",
        "path": "AllergyIntolerance.lastOccurrence",
        "mustSupport": true
      },
      {
        "id": "AllergyIntolerance.note",
        "path": "AllergyIntolerance.note",
        "max": "1",
        "mustSupport": true
      },
      {
        "id": "AllergyIntolerance.reaction",
        "path": "AllergyIntolerance.reaction",
        "max": "1",
        "mustSupport": true
      }
    ]
  }
}
